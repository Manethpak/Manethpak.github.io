---
import { Menu } from "lucide-react";
---

<nav
  id="desktop"
  class="hidden fixed lg:inset-y-0 lg:flex z-10 top-4 gap-4 lg:flex-col justify-center flex-row"
>
  <a href="/#about" class="active">About</a>
  <a href="/#skill">Skill</a>
</nav>

<nav id="mobile" class="fixed lg:hidden right-4 top-4 z-20">
  <div class="dropdown dropdown-end">
    <label tabindex="0" class="btn m-1">
      <Menu size="24" />
    </label>
    <ul
      tabindex="0"
      class="dropdown-content menu p-2 shadow bg-neutral rounded-box w-52"
    >
      <li><a href="/#about" class="active">About</a></li>
      <li><a href="/#skill">Skill</a></li>
    </ul>
  </div>
</nav>

<style scoped>
  a {
    @apply font-semibold text-lg text-gray-500 transition-colors;
  }

  li > a {
    width: 100%;
  }

  .active {
    @apply text-blue-500;
  }
</style>

<script>
  let sections = document.querySelectorAll("section");
  let nav = document.querySelectorAll("nav a");

  window.onscroll = () => {
    sections.forEach((section) => {
      let top = window.scrollY;
      let offset = section.offsetTop - 120;
      let height = section.offsetHeight;
      let id = section.getAttribute("id");

      if (top >= offset && top < offset + height) {
        nav.forEach((link) => {
          link.classList.remove("active");
          const targetLink = document.querySelector(`nav a[href*="${id}"]`);
          if (targetLink) {
            targetLink.classList.add("active");
          }
        });
      }
    });
  };
</script>
