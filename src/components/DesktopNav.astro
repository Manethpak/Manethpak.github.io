---
const nav = [
  "About",
  "Skill",
  // "Experience",
  // "Project",
  // "Guestbook"
];
---

<nav
  id="desktop"
  class="hidden fixed lg:inset-y-0 lg:flex z-10 top-4 gap-4 lg:flex-col justify-center flex-row"
>
  {
    nav.map((value, index) => (
      <a href={"/#" + value.toLowerCase()} class={index === 0 ? "active" : ""}>
        {value}
      </a>
    ))
  }
</nav>

<style>
  @media screen and (min-width: 1024px) {
    nav > a::before {
      content: "";
      position: absolute;
      width: 14px;
      height: 2px;
      background-color: rgb(255, 255, 255, 0.4);
      top: 50%;
      left: -20px;
    }

    nav > a.active::before {
      background-color: rgb(34, 211, 238, 0.4);
    }
  }

  nav > a {
    width: fit-content;
    color: rgb(255, 255, 255, 0.6);
  }

  nav > a.active {
    color: rgb(34 211 238);
  }

  a {
    display: inline-block;
    position: relative;
    transition: color 0.25s ease-out;
  }

  nav a:hover {
    color: rgb(34 211 238);
  }

  nav a:after {
    content: "";
    position: absolute;
    width: 100%;
    transform: scaleX(0);
    height: 2px;
    bottom: 0;
    left: 0;
    background-color: rgb(34 211 238);
    transform-origin: bottom right;
    transition: transform 0.25s ease-out;
  }

  nav a:hover:after {
    transform: scaleX(1);
    transform-origin: bottom left;
  }

  a.active {
    color: rgb(34 211 238);
  }

  @media screen {
  }
</style>

<script>
  let sections = document.querySelectorAll("section");
  let nav = document.querySelectorAll("nav a");

  window.onscroll = () => {
    sections.forEach((section) => {
      let top = window.scrollY;
      let offset = section.offsetTop - 120;
      let height = section.offsetHeight;
      let id = section.getAttribute("id");

      if (top >= offset && top < offset + height) {
        nav.forEach((link) => {
          link.classList.remove("active");
          const targetLink = document.querySelector(`nav a[href*="${id}"]`);
          if (targetLink) {
            targetLink.classList.add("active");
          }
        });
      }
    });
  };
</script>
